syntax = "proto3";

package cli.v1;

import "google/protobuf/descriptor.proto";

option go_package = "github.com/drewfead/proto-cli/proto/cli/v1;cli";

// CLI command annotation for RPC methods
// Customizes command name and help text following urfave/cli v3 best practices
message CommandOptions {
  // Custom name for the command (defaults to kebab-case of method name)
  string name = 1;

  // Short one-line description shown in command lists and help summaries
  // Best practice: Keep concise (e.g., "retrieve a user by ID")
  string description = 2;

  // Longer, detailed explanation of the command
  // Use this for multi-paragraph documentation, examples, and detailed behavior
  string long_description = 3;

  // Custom usage text to override the auto-generated USAGE line
  // Example: "get-user [options] <user-id>"
  string usage_text = 4;

  // Description of arguments this command accepts
  // Example: "<user-id>" or "[filter-expression]"
  string args_usage = 5;
}

// CLI flag annotation for message fields
// Maps message fields to CLI flags
message FlagOptions {
  string name = 1;
  string shorthand = 2;
  string usage = 3;
  bool required = 4;
}

// Service options annotation
// Defines CLI customization for a service following urfave/cli v3 best practices
message ServiceOptions {
  // Custom name for the service command (defaults to kebab-case of service name)
  string name = 1;

  // Short one-line description shown in service lists
  // Best practice: Keep concise (e.g., "user management commands")
  string description = 2;

  // Longer, detailed explanation of the service
  // Use this for multi-paragraph documentation and service overview
  string long_description = 3;

  // Custom usage text to override the auto-generated USAGE line
  string usage_text = 4;

  // Description of arguments this service accepts
  string args_usage = 5;
}

// Service config annotation
// Defines the configuration message type for a service
message ServiceConfigOptions {
  // Name of the config message type (must be in same package)
  string config_message = 1;
}

extend google.protobuf.MethodOptions {
  CommandOptions command = 50001;
}

extend google.protobuf.FieldOptions {
  FlagOptions flag = 50002;
}

extend google.protobuf.ServiceOptions {
  ServiceOptions service = 50000;
  ServiceConfigOptions service_config = 50003;
}
